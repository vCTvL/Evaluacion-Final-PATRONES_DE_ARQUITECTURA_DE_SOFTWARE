<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Pr√©stamos - Biblioteca</title>
    <link rel="stylesheet" href="prestamos.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Sistema de Pr√©stamos</h1>
            <p>Gestiona los pr√©stamos de libros de la biblioteca</p>
        </header>
        <!-- Logout: redirige al gateway para borrar la cookie de autenticaci√≥n -->
        <div style="text-align:right; margin: 0.5rem 0;">
            <a href="http://localhost:5003/logout" class="btn btn-logout" style="background:#d32f2f;color:#fff;padding:6px 10px;border-radius:4px;text-decoration:none;">Logout</a>
        </div>

        <div class="main-grid">
            <!-- COLUMNA IZQUIERDA: Pr√©stamos -->
            <div class="left-column">
                <!-- Secci√≥n: Prestar Libro -->
                <section class="card">
                    <h2>Prestar Libro</h2>
                    <form id="formPrestar">
                        <div class="form-group">
                            <label for="libroId">ID del Libro:</label>
                            <input type="number" id="libroId" name="libroId" required placeholder="Ej: 1">
                        </div>
                        <div class="form-group">
                            <label for="usuarioNombre">Nombre del Usuario:</label>
                            <input type="text" id="usuarioNombre" name="usuarioNombre" required placeholder="Ej: Juan P√©rez">
                        </div>
                        <button type="submit" class="btn btn-primary">Prestar Libro</button>
                    </form>
                </section>

                <!-- Secci√≥n: Pr√©stamos Activos -->
                <section class="card">
                    <h2>Pr√©stamos Activos</h2>
                    <div class="table-container">
                        <table id="tablaPrestamosActivos">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Libro ID</th>
                                    <th>Usuario</th>
                                    <th>Fecha Pr√©stamo</th>
                                    <th>Acci√≥n</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="5" class="empty-message">No hay pr√©stamos activos</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Secci√≥n: Historial Completo -->
                <section class="card">
                    <h2>Historial de Pr√©stamos</h2>
                    <div class="table-container">
                        <table id="tablaHistorial">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Libro ID</th>
                                    <th>Usuario</th>
                                    <th>Fecha Pr√©stamo</th>
                                    <th>Fecha Devoluci√≥n</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="6" class="empty-message">No hay historial de pr√©stamos</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>

            <!-- COLUMNA DERECHA: Libros Disponibles -->
            <div class="right-column">
                <section class="card card-sticky">
                    <h2>üìñ Libros Disponibles</h2>
                    <div class="search-box">
                        <input type="text" id="buscarLibro" placeholder="Buscar libro por t√≠tulo o autor...">
                    </div>
                    <div class="table-container">
                        <table id="tablaLibros">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>T√≠tulo</th>
                                    <th>Autor</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td colspan="4" class="empty-message">Cargando libros...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="prestamos.js"></script>
</body>
</html>